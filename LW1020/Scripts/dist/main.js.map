{"version":3,"file":"main.js","sources":["extSchema.js","rateService.js","utils.js","main.js"],"names":[],"mappings":"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","sourcesContent":["define('extSchema',[],function () {\r\n    \"use strict\";\r\n\r\n    var cols = [\r\n       { title: \"Delete\", width: 45, template: \"<input type='checkbox' class='chkbox' />\", attributes: { class: \"align-center\" } },\r\n       //{ field: \"status\", title: \"Billed/Unbilled\", headerTemplate: \"<div>Billed/</div><div>Unbilled</div>\", width: 50, headerAttributes: { style: \"text-align: center\" }, attributes: { class: \"align-center\" } },\r\n       { field: \"status\", title: \"Billed/Unbilled\", headerTemplate: \"<div>Billed/</div><div>Unbilled</div>\", width: 55, headerAttributes: { \"class\": \"wrap-header\" }, attributes: { class: \"align-center\" } },\r\n       { field: \"id\", width: 50, format: \"{0:00000}\", hidden: true },\r\n       { field: \"name\", title: \"Timekeeper Name\", width: 160, template: \"<span title='${name}'>${name}</span>\", headerAttributes: { \"class\": \"wrap-header\" } },   // Add tooltip: http://jsfiddle.net/OnaBai/8U6rg/3/\r\n       { field: \"lvl\", width: 30, hidden: true },\r\n       { field: \"title\", title: \"Title\", width: 95, template: \"<span title='${title}'>${title}</span>\", headerAttributes: { \"class\": \"wrap-header\" } },\r\n       { field: \"loc\", title: \"Loc\", width: 50, attributes: { class: \"align-center\" }, headerAttributes: { \"class\": \"wrap-header\" } },\r\n       { field: \"dep\", title: \"Dept\", width: 50, attributes: { class: \"align-center\" }, headerAttributes: { \"class\": \"wrap-header\" } },\r\n       { field: \"hrsBill\", title: \"Hours Billed\", headerTemplate: \"<div>Hours</div><div>Billed</div>\", width: 60, format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\"}, attributes: { class: \"align-right\" }, footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\" },\r\n       { field: \"amtBill\", title: \"Amount Billed $\", headerTemplate: \"<div>Amount</div><div>Billed $</div>\", format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\"}, attributes: { class: \"align-right\" }, footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\" },\r\n       { field: \"rateBlend\", title: \"Blended Rate\", headerTemplate: \"<div>Blended</div><div>Rate</div>\", width: 70, format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\"}, attributes: { class: \"align-right\" } },\r\n       { field: \"hrsProp\", title: \"Prop Hours\", width: 75, format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\" }, attributes: { class: \"align-right\" }, footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\", editor: editNoSpinners },\r\n       { field: \"rateProp\", title: \"Prop Rate\", width: 75, format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\" }, attributes: { class: \"align-right\" }, editor: editNoSpinners },\r\n       {\r\n           field: \"calcProp\", title: \"Prop Calc\", format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\"}, attributes: { class: \"align-right\" },\r\n           footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\"\r\n           // editable via code, but read-only via GUI: http://jsfiddle.net/inikolova/H6tgv/9/ \r\n           //editor: function (container, options) { $(\"<span>\" + options.model.calcProp + \"</span>\").appendTo(container); }\r\n       },\r\n       { field: \"conv1\", hidden: true },\r\n       { field: \"conv2\", hidden: true },\r\n       { field: \"conv3\", hidden: true }\r\n\r\n       // Multi-year projection: Grid columns order matter\r\n       //{ field: \"rate1\", title: \"Total Prop Rate 1\", format: \"{0:n2}\", attributes: { class: \"align-right\" }, template: kendo.template($(\"#tmplConv1\").html()) },\r\n       //{\r\n       //    field: \"calc1\", title: \"Total Prop Calc 1\", format: \"{0:n2}\", attributes: { class: \"align-right\" },\r\n       //    footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\"\r\n       //},\r\n       //{ field: \"rate2\", title: \"Total Prop Rate 2\", format: \"{0:n2}\", attributes: { class: \"align-right\" }, template: kendo.template($(\"#tmplConv2\").html()) },\r\n       //{\r\n       //    field: \"calc2\", title: \"Total Prop Calc 2\", format: \"{0:n2}\", attributes: { class: \"align-right\" },\r\n       //    footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\"\r\n       //},\r\n       //{ field: \"rate3\", title: \"Total Prop Rate 3\", format: \"{0:n2}\", attributes: { class: \"align-right\" }, template: kendo.template($(\"#tmplConv3\").html()) },\r\n       //{\r\n       //    field: \"calc3\", title: \"Total Prop Calc 3\", format: \"{0:n2}\", attributes: { class: \"align-right\" },\r\n       //    footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\"\r\n       //}\r\n    ],\r\n    data = [\r\n       { status: \"B\", id: \"02947\", name: \"BURNHAM, DANIEL C\", lvl: 1, title: \"PARTNER\", loc: \"SD\", dep: \"Corp.\", hrsBill: 112.30, amtBill: 70226.22, rateBlend: 555, hrsProp: 0, rateProp: 0, calcProp: 0 },\r\n       { status: \"U\", id: \"02616\", name: \"FRENCH, SCOTT Y\", lvl: 1, title: \"ASSOCIATE, JR.\", loc: \"LA\", dep: \"Corp.\", hrsBill: 2.00, amtBill: 918.00, rateBlend: 666, hrsProp: 0, rateProp: 0, calcProp: 0 },\r\n       { status: \"U\", id: \"00873\", name: \"LEBRON, ANTHONY P\", lvl: 5, title: \"PARALEGAL\", loc: \"DC\", dep: \"Corp.\", hrsBill: 1.60, amtBill: 369.74, rateBlend: 777, hrsProp: 0, rateProp: 0, calcProp: 0 }\r\n    ],\r\n    // http://docs.telerik.com/kendo-ui/api/javascript/data/model#model.define\r\n    // http://www.telerik.com/forums/the-parse-function-of-kendo-data-model-not-triggered-when-create-a-new-model\r\n    // http://stackoverflow.com/questions/14266647/creating-a-column-in-kendogrid-that-is-not-bound-to-datasource\r\n    model = kendo.data.Model.define({\r\n        id: \"id\",\r\n        fields: {\r\n            status: {},\r\n            id: {},\r\n            name: {},\r\n            title: {},\r\n            lvl: { type: \"number\", defaultValue: 0 },\r\n            loc: {},\r\n            dep: {},\r\n            hrsBill: { type: \"number\", defaultValue: 0 },\r\n            amtBill: { type: \"number\", defaultValue: 0 },\r\n            rateBlend: { type: \"number\", defaultValue: 0 },\r\n            hrsProp: { type: \"number\", defaultValue: 0, validation: { min: 0, required: true } },\r\n            rateProp: { type: \"number\", defaultValue: 0, validation: { min: 0, required: true } },\r\n            calcProp: { type: \"number\", defaultValue: 0 },\r\n            conv1: {},\r\n            conv2: {},\r\n            conv3: {},\r\n\r\n            // Multi-year projection: Model fields order don't matter, just grid columns, ie. var cols (see above)\r\n            rate1: { type: \"number\", defaultValue: 0 },\r\n            calc1: { type: \"number\", defaultValue: 0 },\r\n            rate2: { type: \"number\", defaultValue: 0 },\r\n            calc2: { type: \"number\", defaultValue: 0 },\r\n            rate3: { type: \"number\", defaultValue: 0 },\r\n            calc3: { type: \"number\", defaultValue: 0 }\r\n        }\r\n    }),\r\n    flds = {\r\n        status: {},\r\n        id: {},\r\n        name: {},\r\n        title: {},\r\n        lvl: { type: \"number\", defaultValue: 0 },\r\n        loc: {},\r\n        dep: {},\r\n        hrsBill: { type: \"number\", defaultValue: 0 },\r\n        amtBill: { type: \"number\", defaultValue: 0 },\r\n        rateBlend: { type: \"number\", defaultValue: 0 },\r\n        hrsProp: { type: \"number\", defaultValue: 0, validation: { min: 0, required: true } },\r\n        rateProp: { type: \"number\", defaultValue: 0, validation: { min: 0, required: true } },\r\n        calcProp: { type: \"number\", defaultValue: 0 },\r\n        conv1: {},\r\n        conv2: {},\r\n        conv3: {},\r\n\r\n        // Multi-year projection: Model fields order don't matter, just grid columns, ie. var cols (see above)\r\n        rate1: { type: \"number\", defaultValue: 0 },\r\n        calc1: { type: \"number\", defaultValue: 0 },\r\n        rate2: { type: \"number\", defaultValue: 0 },\r\n        calc2: { type: \"number\", defaultValue: 0 },\r\n        rate3: { type: \"number\", defaultValue: 0 },\r\n        calc3: { type: \"number\", defaultValue: 0 }\r\n    },\r\n    // http://blog.falafel.com/aggregates-with-kendo-datasource/\r\n    aggrs = [\r\n       { field: \"hrsBill\", aggregate: \"sum\" },\r\n       { field: \"amtBill\", aggregate: \"sum\" },\r\n       { field: \"hrsProp\", aggregate: \"sum\" },\r\n       { field: \"calcProp\", aggregate: \"sum\" },\r\n\r\n       { field: \"calc1\", aggregate: \"sum\" },\r\n       { field: \"calc2\", aggregate: \"sum\" },\r\n       { field: \"calc3\", aggregate: \"sum\" }\r\n    ],\r\n    ds = new kendo.data.DataSource({\r\n        //data: data,\r\n        schema: { model: model },\r\n        aggregate: aggrs\r\n    }),\r\n\r\n    // Remove spinners from numeric field in Grid\r\n    // http://stackoverflow.com/questions/14396036/remove-spinners-from-numeric-field-in-grid\r\n    // http://www.telerik.com/forums/don-t-show-spinners-on-numeric-textboxes-in-grid\r\n    editNoSpinners = function (container, options) {\r\n        $('<input data-text-field=\"' + options.field + '\" ' +\r\n                'data-value-field=\"' + options.field + '\" ' +\r\n                'data-bind=\"value:' + options.field + '\" ' +\r\n                'data-format=\"' + options.format + '\"/>')\r\n                .appendTo(container)\r\n                .kendoNumericTextBox({\r\n                    spinners: false\r\n                });\r\n    };\r\n\r\n    return {\r\n        cols: cols,\r\n        model: model,\r\n        flds: flds,\r\n        aggrs: aggrs,\r\n        ds: ds,\r\n        editNoSpinners: editNoSpinners\r\n    };\r\n});\n","// http://stackoverflow.com/questions/336859/var-functionname-function-vs-function-functionname\r\n// http://verekia.com/requirejs/build-simple-client-side-mvc-app-require-js\r\n// VB: getTkRates\r\ndefine('rateService',[],function () {\r\n    //var rateService = function ($) {\r\n    \"use strict\";\r\n\r\n    var parm = function (id, lvl, code, curr) {\r\n        this.id = id;           // sp_RateTimekeeperRoster >> ttk\r\n        this.lvl = lvl;         // sp_RateTimekeeperRoster >> tilevel\r\n        this.code = code;       // sp_RateRatesList >> rtCode\r\n        this.curr = curr;       // sp_RateRatesList >> rtCurr\r\n    },\r\n    // http://stackoverflow.com/questions/17595297/jquery-deferred-when-with-multiple-objects\r\n    getAllRates = function (ary) {\r\n        var def = $.Deferred(),\r\n            promises = $.map(ary, function (item, idx) {\r\n                return getTkRates.apply(this, item);\r\n            });\r\n\r\n        $.when.apply($, promises).then(function () {\r\n            var arr = [];\r\n            $.each(arguments, function (idx, item) {\r\n                //console.groupCollapsed(item[0].id);\r\n                //$.each(item, function (cntr, current) {\r\n                //    console.log('Index: ' + cntr + ' -->  ' + current.id + ', ' + current.rate + ', ' + current.conv);\r\n                //});\r\n                //console.groupEnd();\r\n                arr.push(item);\r\n            });\r\n            def.resolve(arr);\r\n        }, function (err) {\r\n            def.reject(err);\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n    // No specific parameters defined, access via the unnamed \"arguments\" object\r\n    getTkRates = function () {\r\n        var def = $.Deferred(),\r\n            promises = $.map(arguments, function (item, idx) {\r\n                return getModelRate(item);\r\n            });\r\n\r\n        $.when.apply($, promises).then(function (r1, r2, r3) {\r\n            // Assume 3 responses\r\n            def.resolve([].concat(r1).concat(r2).concat(r3));\r\n        }, function (err) {\r\n            def.reject(err);\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n    getModelRate = function () {\r\n        var _conv = 'N',\r\n            _rate = 0,\r\n            def = $.Deferred(),\r\n            args = Array.prototype.slice.call(arguments)[0];\r\n\r\n        // http://stackoverflow.com/questions/13951456/using-deferred-with-nested-ajax-calls-in-a-loop?rq=1 [Multiple jquery promises]\r\n        // http://www.htmlgoodies.com/beyond/javascript/making-promises-with-jquery-deferred.html\r\n        if (args.code !== undefined) {\r\n            if (args.code > 50) {\r\n                getRate(args.code, args.curr)\r\n                    .then(function (data, status, xhr) {    // done [getRate]\r\n                        if (JSON.stringify(data) !== \"[]\") {\r\n                            var rate = data[0]['rlev' + args.lvl.pad()] || 0;\r\n                            if (rate > 0) {\r\n                                _rate = rate;\r\n                                def.resolve({ 'id': args.id, 'rate': _rate, 'conv': _conv });\r\n                            } else {\r\n                                getTimeRate(args.id, args.curr)\r\n                                    .then(function (data, status, xhr) {    // done [getTimeRate]\r\n                                        if (JSON.stringify(data) !== \"[]\") {\r\n                                            _conv = 'Y';\r\n                                            if (data[0].tkrtcur !== args.curr)\r\n                                                _rate = data[0].cnvrt01 || 0;\r\n                                            else\r\n                                                _rate = data[0].tkrt01 || 0;\r\n                                        }\r\n                                        def.resolve({ 'id': args.id, 'rate': _rate, 'conv': _conv });\r\n                                    }, function (xhr, status, err) {        // fail [getTimeRate]\r\n                                        toastr.error('getTimeRate: ' + args.id + ', ' + args.curr, err);\r\n                                        def.reject(err + '; getTimeRate: ' + args.id + ', ' + args.code + ', ' + args.curr);\r\n                                    });\r\n                            }\r\n                        } else {\r\n                            def.resolve({ 'id': args.id, 'rate': _rate, 'conv': _conv });\r\n                        }\r\n                    }, function (xhr, status, err) {        // fail [getRate]\r\n                        toastr.error('getRate: ' + args.code + ', ' + args.curr, err);\r\n                        def.reject(err + '; getRate: ' + args.id + ', ' + args.code + ', ' + args.curr);\r\n                    });\r\n\r\n            } else {\r\n                getTimeRate(args.id, args.curr)\r\n                    .then(function (data, status, xhr) {\r\n                        if (JSON.stringify(data) !== \"[]\") {\r\n                            if (data[0].tkrtcur !== args.curr) {\r\n                                _conv = 'Y';\r\n                                _rate = data[0].cnvrt01 || 0;\r\n                            } else {\r\n                                if ((data[0]['tkrt' + args.code.pad()] || 0) > 0)\r\n                                    _rate = data[0]['tkrt' + args.code.pad()] || 0;\r\n                                else\r\n                                    _rate = data[0].tkrt01 || 0;\r\n                            }\r\n                        }\r\n                        def.resolve({ 'id': args.id, 'rate': _rate, 'conv': _conv });\r\n                    }, function (xhr, status, err) {        // fail [getTimeRate]\r\n                        toastr.error('getTimeRate: ' + args.id + ', ' + args.curr, err);\r\n                        def.reject(err + '; getTimeRate: ' + args.id + ', ' + args.curr);\r\n                    });\r\n            }\r\n        } else {\r\n            def.resolve({ 'id': args.id, 'rate': _rate, 'conv': _conv });\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n    getRate = function (code, curr) {\r\n        return $.get($.url('api/Modeler/GetRateList'), { 'code': code, 'curr': curr }, null, 'jsonData');\r\n    },\r\n    getTimeRate = function (id, curr) {\r\n        return $.get($.url('api/Modeler/GetTimeRateList'), { 'id': id, 'curr': curr }, null, 'jsonData');\r\n    };\r\n\r\n    // http://stackoverflow.com/questions/2998784/how-to-output-integers-with-leading-zeros-in-javascript\r\n    Number.prototype.pad = function (size) {\r\n        var s = String(this);\r\n        while (s.length < (size || 2)) { s = \"0\" + s; }\r\n        return s;\r\n    };\r\n\r\n    // Not used\r\n    // http://www.make-awesome.com/2012/11/jquery-postjson-method-for-asp-net-mvc/\r\n    $.postJSON = function (url, data) {\r\n        var o = {\r\n            url: url,\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            contentType: 'application/json; charset=utf-8'\r\n        };\r\n        if (data !== undefined) {\r\n            o.data = JSON.stringify(data);\r\n        }\r\n        return $.ajax(o);\r\n    };\r\n\r\n    return {\r\n        parm: parm,\r\n        getModelRate: getModelRate,     // TESTING only\r\n        getTkRates: getTkRates,         // TESTING only\r\n        getAllRates: getAllRates\r\n    };\r\n    //}(jQuery);\r\n});\n","// VB: CalcAllocation\r\ndefine('utils',[],function () {\r\n    \"use strict\";\r\n\r\n    var wtAmts = function () {\r\n        //$.each(modRates, function (idx, val) {\r\n        //    console.groupCollapsed(val);\r\n        //    $.each(yrPcts, function (ctr, item) {\r\n        //        console.log('--> ' + item);\r\n        //    });\r\n        //    console.groupEnd();\r\n        //});\r\n\r\n        //var yrPcts = [1],\r\n        var yrPcts = [0.0167, 0.2, 0.2, 0.2, 0.2, 0.1833],    // *** This needs to be passed in ***\r\n            modRates = [830, 835, 885],\r\n            hrs = 51.8,\r\n            rtIncr = 0.05,\r\n            fvYr = 0,       // If start date is in future, number of years from today\r\n            arrYrs = [];\r\n\r\n        //[\r\n        //    Year0 --> [{rate: 795, amt: 985}, {rate: 225, amt: 350}, {rate: 450, amt: 625}]\r\n        //    Year1\t\t            \"\t\t\t        \"\t\t\t            \"\r\n        //    Year2\t\t                               ...\r\n        //    Year3\t\t                               ...\r\n        //    Year4\r\n        //    Year5\t\t            \"\t\t\t        \"\t\t\t            \"\r\n        //]\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString\r\n        // http://blog.tompawlak.org/number-currency-formatting-javascript\r\n        // http://openexchangerates.github.io/accounting.js/\r\n        // http://numeraljs.com/\r\n        $.each(yrPcts, function (ctr, item) {\r\n            var arrLine = [];\r\n            $.each(modRates, function (idx, val) {\r\n                var yrNum = fvYr + ctr;\r\n                var fv = fvCalc(val, rtIncr, yrNum, 1);\r\n                arrLine.push({ rate: fv.toFixed(2), amt: (fv * item * hrs).toLocaleString('en-US', { minimumFractionDigits: 2 }) });\r\n            });\r\n            arrYrs.push(arrLine);\r\n        });\r\n\r\n        return arrYrs;\r\n    },\r\n    mnthAlloc = function (day, mnths) {\r\n        //  Last day of month: \r\n        //  Feb: month=1\r\n        //- moment(new Date(2015, month)).endOf('month').format('MM/DD/YYYY')\r\n        var start = moment(day),\r\n            perPct = round(1 / mnths, 4),\r\n            totPct = 0,\r\n            result = [],\r\n            perEnd;\r\n\r\n        for (var i = 0; i < mnths ; i++) {\r\n            if (i === mnths - 1) perPct = round(1 - totPct, 4);       // Checking for the last record and forcing the percent to add up to 100 and not go over 100%.\r\n            perEnd = moment(start).add(i, 'months').endOf('month').format('MM/DD/YYYY');\r\n            result.push(new pctItem(perEnd, perPct));\r\n            totPct += perPct;\r\n        }\r\n        return result;\r\n    },\r\n    yrAlloc = function (day, mnths) {\r\n        var start = moment(day),\r\n            end = moment(start).add(mnths - 1, 'months'),           // clone start: moment(start)\r\n            yrsStart = start.diff(moment(), 'years'),\r\n            yrsTotal = end.get('years') - start.get('years') + 1,   // end.diff(start, 'years')\r\n            totPct = 0,\r\n            result = [],\r\n            perStart, perEnd, perMnths, perPct;\r\n\r\n        for (var i = 0; i < yrsTotal; i++) {\r\n            perEnd = moment(new Date(start.get('years') + i, 11));          // 11=December\r\n            if (i === 0)\r\n                perStart = start;\r\n            else\r\n                perStart = moment(new Date(start.get('years') + i, 0));     // 0=January\r\n            perMnths = perEnd.get('months') - perStart.get('months') + 1;\r\n            perPct = round(perMnths / mnths, 4);\r\n            if (i === yrsTotal - 1) perPct = round(1 - totPct, 4);          // Checking for the last record and forcing the percent to add up to 100 and not go over 100%.\r\n            result.push(new pctItem(start.get('years') + i, perPct));\r\n            totPct += perPct;\r\n        }\r\n        return result;\r\n    },\r\n    // http://www.purplemath.com/modules/expofcns4.htm :  FV = P*(1+r/n)^nt\r\n    //                                                    - OR- P*(1+r)^(startYr - currYr)*(1+r)^(futureYr - startYr)                                                                   \r\n    fvCalc = function (P, r, t) { // Assume annual, ie. n=1\r\n        return P * Math.pow((1 + r), t);\r\n    },\r\n    // FV = P*(1+r)^(startYr - currYr)*[1+(futureYr - startYr)*r]^(futureYr - startYr)  \r\n    // --> VB: buildAllocationArray()\r\n    //fvMthCalc = function (P, r, futureYr, startYr) {\r\n    //    var currYr = (new Date()).getFullYear(),\r\n    //        diff = startYr - currYr,\r\n    //        dura = futureYr - startYr;\r\n    //    return P * Math.pow((1 + r), diff) * Math.pow(1 + dura * r, dura);\r\n    //},\r\n    fvMthCalc = function (P, r, diff, dura) {\r\n        return P * Math.pow((1 + r), diff) * Math.pow(1 + dura * r, dura);\r\n    },\r\n    pctMthDist = function (rate, hrs) {\r\n        var currYr = (new Date()).getFullYear(),\r\n            startYr = (new Date(this.day)).getFullYear(),\r\n            pctIncr = this.incr / 100,\r\n            diff = startYr - currYr,\r\n            futureYr, dura;\r\n        \r\n        // Populate in _multiYrProj.cshtml: pctDist, yrs, day, mnths & incr\r\n        for (var i = 0; i < this.mnths; i++) {\r\n            futureYr = (new Date(this.pctDist[i].dte)).getFullYear();\r\n            dura = futureYr - startYr;\r\n            this.pctDist[i].yr = (new Date(this.pctDist[i].dte)).getFullYear();         // use for grouping\r\n            this.pctDist[i].rate = fvMthCalc(rate, pctIncr, diff, dura);                // use for grouping\r\n            this.pctDist[i].wthrs = this.pctDist[i].pct * hrs;\r\n            this.pctDist[i].wtrate = this.pctDist[i].pct * this.pctDist[i].rate;\r\n            this.pctDist[i].wtamnt = this.pctDist[i].wthrs * this.pctDist[i].rate;\r\n        }\r\n\r\n        // http://stackoverflow.com/questions/22954066/group-by-and-aggregation-on-json-array-using-underscore-js\r\n        var result = _.chain(this.pctDist)\r\n            .groupBy(\"yr\")\r\n            .map(function (value1, key1) {\r\n                return _.chain(value1)\r\n                    .groupBy(\"rate\")\r\n                    .map(function (value2, key2) {\r\n                        return {\r\n                            yr: key1,\r\n                            rate: key2,\r\n                            wthrs: sum(_.pluck(value2, \"wthrs\")),\r\n                            wtamnt: sum(_.pluck(value2, \"wtamnt\"))\r\n                        }\r\n                    })\r\n                    .value();\r\n            })\r\n            .value();\r\n        // Weighted rate & amount\r\n        var WtRate = _.reduce(_.pluck(this.pctDist, 'wtrate'), function (memo, value) { return memo + value; });\r\n        var WtAmt = _.reduce(_.pluck(this.pctDist, 'wtamnt'), function (memo, value) { return memo + value; });\r\n\r\n        var ans = new Array();\r\n        for (var i = 0; i < result.length; i++) {\r\n            ans.push({ 'year': result[i][0].yr, 'rate': result[i][0].rate, 'calc': result[i][0].wtamnt });\r\n        }\r\n        ans.push({ 'year': 9999, 'rate': WtRate, 'calc': WtAmt });\r\n\r\n        return ans;\r\n    },\r\n    // http://www.jacklmoore.com/notes/rounding-in-javascript/\r\n    round = function (value, decimals) {    \r\n        return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\r\n    },\r\n    pctItem = function (dte, pct, rate, wthrs, wtrate, wtamnt) {\r\n        this.dte = dte;\r\n        this.pct = pct;\r\n    };\r\n\r\n    function sum(numbers) {\r\n        return _.reduce(numbers, function (result, current) {\r\n            return result + parseFloat(current);\r\n        }, 0);\r\n    }\r\n\r\n    return {\r\n        mnthAlloc: mnthAlloc,\r\n        yrAlloc: yrAlloc,\r\n        fvCalc: fvCalc,\r\n        fvMthCalc: fvMthCalc,\r\n        pctMthDist: pctMthDist,\r\n        //wtAmts: wtAmts,               // Not used\r\n        pctItem: pctItem,\r\n        round: round\r\n    };\r\n});\n","/*\r\nfunction globalStore() {\r\n   // http://stackoverflow.com/questions/1535631/static-variables-in-javascript\r\n}\r\n*/\r\nglobalStore = {};\r\n\r\nrequire(['extSchema', 'rateService', 'utils'], function (extSchema, rateService, utils) {\r\n   \"use strict\";\r\n\r\n   var rtModels = {},\r\n   onChangefromPicker = function () {\r\n      var val = this.value(),\r\n          toVal = toPicker.value();\r\n            \r\n      if (toVal != null) {\r\n         if (moment(toVal).diff(val, 'months', true) < 0)\r\n            toastr.error('From date must be before To date');\r\n         if (moment(toVal).diff(val, 'months', true) > 36)\r\n            toastr.error('Maximum period range is 36 months');\r\n      }\r\n   },\r\n   onChangetoPicker = function () {\r\n      var val = this.value(),\r\n          fromVal = fromPicker.value();\r\n\r\n      if (fromVal != null) {\r\n         if (moment(val).diff(fromVal, 'months', true) < 0)\r\n            toastr.error('To date must be after From date');\r\n         if (moment(val).diff(fromVal, 'months', true) > 36)\r\n            toastr.error('Maximum period range is 36 months');\r\n      }\r\n   },\r\n   fromPicker = $(\"#fromDate\").kendoDatePicker({\r\n      depth: \"year\",\r\n      start: \"year\",\r\n      format: \"MMyy\",\r\n      parseFormats: [\"MMyy\"],\r\n      min: new Date(1980, 11, 1),\r\n      change: onChangefromPicker      // Anonymous function must be defined before invocation, not the case with a named function\r\n   }).data(\"kendoDatePicker\"),\r\n   toPicker = $(\"#toDate\").kendoDatePicker({\r\n      depth: \"year\",\r\n      start: \"year\",\r\n      format: \"MMyy\",\r\n      parseFormats: [\"MMyy\"],\r\n      min: new Date(1980, 11, 1),\r\n      change: onChangetoPicker\r\n   }).data(\"kendoDatePicker\");\r\n\r\n   fromPicker.enable(false);\r\n   toPicker.enable(false);\r\n\r\n   $(\"#spnFrom, #spnTo\").kendoValidator({   // Do NOT place on \"#fromDate, #toDate\"\r\n      rules: {\r\n         valid: function (e) {\r\n            var val = $(e).val().trim(),\r\n               valid = moment(val, ['MMYY'], true).isValid();       // kendo.parseDate is BUGGY.\r\n            if (val != '' && !valid) {\r\n               return false;\r\n            }\r\n            return true;\r\n         }\r\n      },\r\n      messages: {\r\n         valid: 'Invalid date'\r\n      }\r\n   });\r\n\r\n   // Intially display empty DDLs to prevent \"flashing\" when populated.\r\n   var ddl1 = $('#ddlModel1').kendoDropDownList({ dataSource: [\"Select rate model 1\"]}).getKendoDropDownList(),\r\n      ddl2 = $('#ddlModel2').kendoDropDownList({ dataSource: [\"Select rate model 2\"]}).getKendoDropDownList(),\r\n      ddl3 = $('#ddlModel3').kendoDropDownList({ dataSource: [\"Select rate model 3\"]}).getKendoDropDownList();\r\n\r\n   ddl1.enable(false);\r\n   ddl2.enable(false);\r\n   ddl3.enable(false);\r\n    \r\n   populateRateDDLs();\r\n\r\n   var grdTk = $(\"#grdTk\").kendoGrid({\r\n      autoBind: false,\r\n      columns: extSchema.cols,\r\n      dataSource: extSchema.ds,\r\n      //height: 200,\r\n      //selectable: 'multiple, row',\r\n      editable: true,\r\n      resizable: true\r\n   }).data(\"kendoGrid\");\r\n\r\n   //$('#txtClient').on('keyup', function (e) {\r\n   //    if (this.value.trim().length > 2)\r\n   //        $('#btnSearch').prop('disabled', false);\r\n   //    else\r\n   //        $('#btnSearch').prop('disabled', true);\r\n   //});\r\n\r\n   $('#txtClient').keypress(function (e) {\r\n      if (e.which == 13) $('#btnSearch').trigger('click');\r\n   });\r\n\r\n   $('input[name=\"rbType\"]').click(function () {\r\n      if ($(this).val() === 'Matter') {           // OR $('input[name=rbType]:checked').val() / $('#rbType:checked').val()\r\n         $('#chkSound').prop('disabled', true);\r\n         $('#txtClient').prop('disabled', true).css('background-color', '#eceaea');\r\n         $('#btnSearch').text('Continue');\r\n      } else {\r\n         $('#chkSound').prop('disabled', false);\r\n         $('#txtClient').prop('disabled', false).css('background-color', '#FFFFFF');\r\n         $('#btnSearch').text('Search');\r\n      }\r\n   });\r\n\r\n   $('input[name=\"rbPeriod\"]').click(function () {\r\n      if ($('#divPeriod').is(':enabled')) {\r\n         if ($(this).val() === 'Year') {\r\n            fromPicker.value(null);\r\n            toPicker.value(null);\r\n            fromPicker.enable(false);\r\n            toPicker.enable(false);\r\n\r\n            $(\"#fromDate\").siblings(\"span.k-tooltip-validation\").hide();\r\n            $(\"#toDate\").siblings(\"span.k-tooltip-validation\").hide();\r\n         } else {\r\n            fromPicker.enable(true);\r\n            toPicker.enable(true);\r\n            //$(\".k-datepicker input\").prop(\"readonly\", true);      // Disable manual entry\r\n         }\r\n      }\r\n   });\r\n\r\n   $('#btnSearch').click(function () {\r\n      // #region Re-initialize\r\n      var hgt = $('#divClient').height();\r\n\r\n      $('#divClient').text('').height(hgt);\r\n      $('#divMatter').text('').height(hgt);\r\n      $('#divStart').text('').height(hgt);\r\n      $('#divDuration').text('').height(hgt);\r\n      $('#divCurrency').text('').height(hgt);\r\n      $('#divGroup').text('').height(hgt);\r\n\r\n      grdTk.destroy();\r\n      grdTk = $(\"#grdTk\").empty().kendoGrid({\r\n         autoBind: false,\r\n         columns: extSchema.cols,\r\n         dataSource: extSchema.ds,\r\n         //height: 200,\r\n         //selectable: 'multiple, row',\r\n         editable: true,\r\n         resizable: true\r\n      }).data(\"kendoGrid\");\r\n      grdTk.dataSource.data([]);\r\n\r\n      $('#btnPull').text('Pull Roster');\r\n      //$('#btnPrj').prop('disabled', true);\r\n\r\n      utils.pctDist = undefined;\r\n      utils.yrs = undefined;\r\n      utils.day = undefined;\r\n      utils.mnths = undefined;\r\n      utils.incr = undefined;\r\n      // #endregion\r\n\r\n      if ($('[name=rbType]:checked').val() === 'Client')\r\n         openWinClient();\r\n      else\r\n         openWinMatter();\r\n\r\n   });\r\n\r\n   // http://blog.falafel.com/kendo-grid-using-a-calculated-default-value/\r\n   // http://stackoverflow.com/questions/17205595/how-to-change-columns-set-of-kendo-grid-dynamically\r\n   $(\"#btnPull\").on(\"click\", function () {\r\n      kendo.ui.progress($(\"#divTk\"), true);\r\n\r\n      var mod1 = $('#ddlModel1').getKendoDropDownList().value().split('|'),      // rtCurr | rtCode | rtCurrSymbol | rtDesc  <--  EXEC son_dbrpt.dbo.sp_RateRatesList ''\r\n         mod2 = $('#ddlModel2').getKendoDropDownList().value().split('|'),       // OR $('#ddlModel2').data(\"kendoDropDownList\").value()\r\n         mod3 = $('#ddlModel3').getKendoDropDownList().value().split('|'),\r\n         per = $('input:radio[name=rbPeriod]:checked').val(),                    // Year | Period\r\n         beg = kendo.toString(fromPicker.value(), \"MMyy\"),                       // reg = /^[0-1]{1}\\d{1}\\d{2}$/;       // MMYY format\r\n         end = kendo.toString(toPicker.value(), \"MMyy\"),                         // reg.test(from)\r\n         bil = $(\"#chkBilled\").is(\":checked\"),\r\n         unb = $(\"#chkUnbilled\").is(\":checked\"),\r\n         tot = grdTk.dataSource.total();\r\n\r\n      rtModels.curr1 = mod1[0];\r\n      rtModels.code1 = parseInt(mod1[1]) || undefined;\r\n      rtModels.currSymbol1 = mod1[2];\r\n      rtModels.desc1 = mod1[3];\r\n      \r\n      rtModels.curr2 = mod2[0];\r\n      rtModels.code2 = parseInt(mod2[1]) || undefined;\r\n      rtModels.currSymbol2 = mod2[2];\r\n      rtModels.desc2 = mod2[3];\r\n\r\n      rtModels.curr3 = mod3[0];\r\n      rtModels.code3 = parseInt(mod3[1]) || undefined;\r\n      rtModels.currSymbol3 = mod3[2];\r\n      rtModels.desc3 = mod3[3];\r\n\r\n      var addTks = grdTk.dataSource.data().some(function (elem) { return elem.status === '' });     // Added Tks via button \"Add Timekeepers\"\r\n      if (per === 'Period') {\r\n         checkPeriod(beg, end).then(function (data) {\r\n            switch (data) {\r\n               case 0:\r\n                  if (addTks || isParmsClean(per, beg, end, bil, unb, tot))\r\n                     getNewRateStructures();\r\n                  else\r\n                     getTks();\r\n                  break;\r\n               case 1:\r\n                  toastr.error('Invalid Ending period, please re-enter.');\r\n                  kendo.ui.progress($(\"#divTk\"), false);\r\n                  break;\r\n               case 2:\r\n                  toastr.error('Invalid Beginning period, please re-enter.');\r\n                  kendo.ui.progress($(\"#divTk\"), false);\r\n                  break;\r\n               case 3:\r\n               default:\r\n                  toastr.error('Period needs to be within 3 years, please re-enter.');\r\n                  kendo.ui.progress($(\"#divTk\"), false);\r\n                  break;\r\n            }\r\n         }, function (xhr) {\r\n            toastr.error('checkPeriod: ' + xhr.statusText);\r\n            kendo.ui.progress($(\"#divTk\"), false);\r\n         });\r\n      } else {\r\n         if (addTks || isParmsClean(per, beg, end, bil, unb, tot))\r\n            getNewRateStructures();\r\n         else\r\n            getTks();\r\n      }\r\n\r\n   });\r\n\r\n   $('#btnDel').on('click', function () {\r\n      /*** Even with multiple selections, only delete one row at a time.   \r\n      //$(\"#grdTk\").find(\"input:checked\").each(function () {\r\n      $('.chkbox:checked').each(function () {\r\n         grdTk.removeRow($(this).closest('tr'));\r\n      })\r\n      */\r\n\r\n      var data = grdTk.dataSource.data(),\r\n         len = data.length;\r\n\r\n      if ($(\"#grdTk\").find(\"input:checked\").length == 0) {\r\n         toastr.warning('No timekeepers selected');\r\n      } else {\r\n         while (len--) {\r\n            if (data[len].dirty)\r\n               grdTk.dataSource.remove(data[len]);\r\n         }\r\n      }\r\n\r\n      // Reset grid height\r\n      // $('#grdTk > .k-grid-content').css({ 'height': '175px' });\r\n   });\r\n\r\n   // #region TESTING\r\n   //$('#btnDel').on('click', function () {\r\n   //    //$('.chkbox:checked').each(function (e) {\r\n   //    //    grdTk.removeRow($(this).closest('tr'));\r\n   //    //});\r\n\r\n   //    $('#grdTk').find('input:checked').each(function (e) {\r\n   //        grdTk.removeRow($(this).closest('tr'));\r\n   //    });\r\n\r\n   //    // #region Archive\r\n   //    //var day = new Date(2018, 5),    // June 1, 2018\r\n   //    //    mnths = parseInt($('#txtClient').val());\r\n\r\n   //    //    alert(utils.fvMthCalc(440, 0.075, 2018, 2018).toFixed(2));\r\n   //    //alert(JSON.stringify(utils.yrAlloc(day, mnths), true));\r\n   //    //alert(JSON.stringify(utils.mnthAlloc(day, mnths), true));\r\n\r\n\r\n   //    /*** --- RATE TESTING --- ***/\r\n   //    //var fv = utils.fvCalc(850, 0.05, 2);\r\n   //    //toastr.info('Future value: ' + fv.toFixed(2));\r\n\r\n   //    //toastr.info(JSON.stringify(utils.wtAmts(), null, 4));\r\n   //    //console.log(JSON.stringify(utils.wtAmts(), null, 4));\r\n\r\n   //    //var arrAlloc = utils.wtAmts().slice(0);\r\n\r\n\r\n   //    /*** TEMPLATE ***/\r\n   //    //var arr1 = [];\r\n   //    //arr1.push(new rateService.parm('08755', 50, 26, 'USD'),\r\n   //    //          new rateService.parm('08755', 50, 59, 'USD'),\r\n   //    //          new rateService.parm('08755', 50, 62, 'USD'));\r\n   //    //var arr2 = [];\r\n   //    //arr2.push(new rateService.parm('30620', 7, 19, 'USD'),\r\n   //    //          new rateService.parm('30620', 7, 31, 'USD'),\r\n   //    //          new rateService.parm('30620', 7, 89, 'USD'));\r\n   //    //var arr3 = [];\r\n   //    //arr3.push(new rateService.parm('08757', 50, 19, 'USD'),\r\n   //    //          new rateService.parm('08757', 50, 31, 'USD'),\r\n   //    //          new rateService.parm('08757', 50, 89, 'USD'));\r\n   //    //var arr = [];\r\n   //    //arr.push(arr1, arr2, arr3);\r\n   //    //arr.push(arr1);\r\n\r\n   //    //rateService.getAllRates(arr)\r\n   //    //    .then(function (data) {\r\n   //    //        console.log(JSON.stringify(data, null, 4));\r\n   //    //        toastr.info(JSON.stringify(data, null, 4));\r\n   //    //    }, function (err) {\r\n   //    //        toastr.error(err);\r\n   //    //    });\r\n   //    /**************/\r\n\r\n   //    //ans = []\r\n   //    //$.map(arr, function (item, idx) {\r\n   //    //    rateService.getTkRates.apply(null, item)\r\n   //    //        .then(function (data) {\r\n   //    //            //console.table(data);    // IE doesn't support console.table  \r\n   //    //            toastr.info(JSON.stringify(data, null, 4));\r\n   //    //            ans.push(data);\r\n   //    //        }, function (err) {\r\n   //    //            toastr.error(err);\r\n   //    //        });\r\n   //    //});\r\n\r\n   //    //var arr = [];\r\n   //    //arr.push(new rateService.parm('16100', 7, 19, 'USD'));\r\n   //    //arr.push(new rateService.parm('16100', 7, 31, 'USD'));\r\n   //    ////arr.push(new rateService.parm('02947', 3, 0, ''));\r\n   //    //arr.push(new rateService.parm('16100', 7, 89, 'USD'));\r\n   //    //rateService.getTkRates.apply(null, arr)\r\n   //    //    .then(function(data) {\r\n   //    //        //console.table(data);    // IE doesn't support console.table  \r\n   //    //        toastr.info(JSON.stringify(data, null, 4));\r\n   //    //    }, function(err) {\r\n   //    //        toastr.error(err);\r\n   //    //    });\r\n\r\n   //    //var arr = [];\r\n   //    //arr.push(new rateService.parm('00643', 1, 59, 'USD'));\r\n   //    //rateService.getModelRate.apply(null, arr)\r\n   //    //    .then(function (data) {\r\n   //    //        //console.table(data);    // IE doesn't support console.table  \r\n   //    //        toastr.info(JSON.stringify(data, null, 4));\r\n   //    //    }, function (err) {\r\n   //    //        toastr.error(err);\r\n   //    //    });\r\n\r\n   //    //rateService.getRate(62, 'USD');\r\n   //    //rateService.getTimeRate('01256', 'USD');\r\n\r\n   //    // http://api.jquery.com/category/deferred-object/\r\n   //    // Callbacks are executed in the order they were added\r\n   //    //rateService.getRate(62, 'USD')\r\n   //    //            .then(function (data, status, xhr) {\r\n   //    //            })\r\n   //    //            .done(function (data, status, xhr) {\r\n   //    //            })\r\n   //    //            .fail(function (xhr, err, status) {\r\n   //    //            })\r\n   //    //            .always(function (xhr, err, status) {\r\n   //    //            });\r\n   //    // #endregion\r\n   //});\r\n   // #endregion\r\n\r\n    $('#btnAdd').on('click', function () {\r\n        $(\"#wincontainer\").append(\"<div id='winAdd'></div>\");\r\n        $(\"#winAdd\").kendoWindow({\r\n           //actions: {},\r\n            animation: {\r\n               open: {\r\n                  effects: \"slideIn:down fadeIn\",\r\n                  duration: 750\r\n               },\r\n               close: {\r\n                  //effects: \"zoom:out fade:out\",\r\n                  //effects: \"fadeOut\"\r\n                  effects: \"slideIn:down fadeOut\",\r\n                  reverse: true,\r\n                  duration: 500\r\n               }\r\n            },\r\n            title: 'Add a timekeeper',\r\n            visible: false,\r\n            width: 775,\r\n            height: 365,\r\n            draggable: true,\r\n            resizable: false,\r\n            content: { url: $.url('Pages/AddTks') },\r\n            modal: true,\r\n            open: function () { kendo.ui.progress($(\"#winAdd\"), true); },\r\n            close: function (e) {\r\n               if (!e.userTriggered) {\r\n                  kendo.ui.progress($(\"#winAdd\"), true);\r\n                  var grdPrjDS = $('#grdPrjHrs').data(\"kendoGrid\").dataSource,\r\n                     grdTkDS = $('#grdTk').data(\"kendoGrid\").dataSource,\r\n                     grdPrjData = grdPrjDS.data(),\r\n                     grdTkData = grdTkDS.data().toJSON(),\r\n                     tksAdded = [];\r\n\r\n                  grdPrjData.forEach(function (elem) {\r\n                     for (var i = 1; i <= elem.qtyEmp; i++) {\r\n                        /* SLOW PROCESS\r\n                        grdTkDS.add({\r\n                              status: '',\r\n                              id: elem.tkid,\r\n                              name: elem.name,\r\n                              lvl: elem.level,\r\n                              title: elem.title,\r\n                              loc: elem.loc,\r\n                              dep: elem.dept,\r\n                              hrsBill: 0,\r\n                              amtBill: 0,\r\n                              rateBlend: 0,\r\n                              hrsProp: elem.totHrs,\r\n                              rateProp: 0,\r\n                              calcProp: 0,\r\n\r\n                              rate1: 0,   //Resolve error: Unable to get property 'toFixed' of undefined or null reference\r\n                              rate2: 0,   //--> Templates: tmplConv1..3\r\n                              rate3: 0,\r\n                              calc1: 0,\r\n                              calc2: 0,\r\n                              calc3: 0,\r\n                        });\r\n                        */\r\n                        tksAdded.push({\r\n                              status: '',\r\n                              id: elem.tkid,\r\n                              name: elem.name,\r\n                              lvl: elem.level,\r\n                              title: elem.title,\r\n                              loc: elem.loc,\r\n                              dep: elem.dept,\r\n                              hrsBill: 0,\r\n                              amtBill: 0,\r\n                              rateBlend: 0,\r\n                              hrsProp: elem.totHrs,\r\n                              rateProp: 0,\r\n                              calcProp: 0,\r\n\r\n                              rate1: 0,   //Resolve error: Unable to get property 'toFixed' of undefined or null reference\r\n                              rate2: 0,   //--> Templates: tmplConv1..3\r\n                              rate3: 0,\r\n                              calc1: 0,\r\n                              calc2: 0,\r\n                              calc3: 0,\r\n                        });\r\n                     }\r\n                  });\r\n                  grdTkDS.data(_.union(grdTkData, tksAdded));\r\n\r\n                  if (grdTkDS.total() > 0) {\r\n                     enableRates(true, true);\r\n\r\n                     disableBtns(false);\r\n                     $('#btnPull').text(' ReCalc ');\r\n                     $(\"#btnPull\").trigger('click');\r\n                  }\r\n               }\r\n            },\r\n            deactivate: function () { this.destroy(); }\r\n        }).data(\"kendoWindow\").center().open();\r\n    });\r\n\r\n    $('#btnPrj').on('click', function () {\r\n       // http://jsfiddle.net/latenightcoder/DmAMc/\r\n       // http://demos.telerik.com/kendo-ui/window/animation\r\n        $(\"#wincontainer\").append(\"<div id='winPrj'></div>\");\r\n        $(\"#winPrj\").kendoWindow({\r\n           //actions: {},\r\n            animation: {\r\n               open: {\r\n                  effects: \"slideIn:down fadeIn\",\r\n                  duration: 750\r\n               },\r\n               close: {\r\n                  //effects: \"zoom:out fadeOut\",\r\n                  //effects: \"fadeOut\"\r\n                  effects: \"slideIn:down fadeOut\",\r\n                  reverse: true,\r\n                  duration: 500\r\n              }\r\n         },\r\n         title: 'Multi-Year Projection',\r\n         visible: false,\r\n         width: 550,\r\n         height: 300,\r\n         draggable: true,\r\n         resizable: false,\r\n         content: { url: $.url('Pages/MultiYrProj') },\r\n         modal: true,\r\n         close: function (e) { if (!e.userTriggered) $(\"#btnPull\").trigger('click'); },\r\n         deactivate: function () { this.destroy(); }\r\n      }).data(\"kendoWindow\").center().open();\r\n   });\r\n\r\n   // http://geekswithblogs.net/rgupta/archive/2014/06/23/downloading-file-using-ajax-and-jquery-after-submitting-form-data.aspx\r\n   // http://stackoverflow.com/questions/16670209/download-excel-file-via-ajax-mvc\r\n   // http://slodge.blogspot.com/2012/09/downloading-dynamic-excel-files-from.html\r\n    $('#btnExl').on('click', function () {\r\n        if (grdTk.dataSource.total()) {\r\n            kendo.ui.progress($(\"#divMain\"), true);\r\n            var hdrs = [];\r\n            $.each(grdTk.columns, function (idx, item) {\r\n                if (item.field !== undefined && (item.hidden === undefined || !item.hidden))\r\n                    hdrs.push({ field: item.field, title: item.title });\r\n            });\r\n\r\n           // Update 1st record: convert integer to decimal to prevent loss of decimals from other records within same field\r\n           // JsonConvert.DeserializeObject<DataTable>(gridData): A column dataType is based on the first record in the result set.\r\n            var row = grdTk.dataSource.at(0);\r\n            $.map(Object.keys(row), function (item) {\r\n               if (item != 'lvl' && $.isInt(row[item])) {\r\n                  row[item] = row[item] + 1e-10;\r\n               }\r\n            })\r\n            $.post($.url('Pages/GenerateExcel'), {\r\n                'colsDef': JSON.stringify(hdrs), 'gridData': JSON.stringify(grdTk.dataSource.data()),\r\n                'client': $('#divClient').text(), 'matter': $('#divMatter').text(),\r\n                'currency': $('#divCurrency').text(), 'rateGrp': $('#divGroup').text(),\r\n                'start': $('#divStart').text(), 'duration': $('#divDuration').text()\r\n            }).done(function (data) {\r\n                window.location = $.url('Pages/DownloadExcel') + \"?fName=\" +data.fileName;\r\n            }).fail(function (xhr, status, err) {\r\n                toastr.error('GenerateExcel: ' +err);\r\n            }).always(function () {\r\n                kendo.ui.progress($(\"#divMain\"), false);\r\n            });\r\n\r\n            // Log user\r\n            $.post($.url('/Pages/LogUserInfo'));\r\n        } else {\r\n           toastr.info('No data to export');\r\n        }\r\n    })\r\n\r\n   /*\r\n   // http://dojo.telerik.com/uvuco/2, http://dojo.telerik.com/oVEV/7\r\n   $('#addCol').click(function () {\r\n       extSchema.cols.push({ field: \"totPrjRate1\", title: \"Total Prop Rate 1\", format: \"{0:n2}\", width: \"100px\", attributes: { class: \"align-right\" } });\r\n       extSchema.cols.push({ field: \"totPrjCalc1\", title: \"Total Prop Calc 1\", format: \"{0:n2}\", width: \"100px\", attributes: { class: \"align-right\" }, footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\" });\r\n\r\n       extSchema.aggrs.push({ field: \"totPrjCalc1\", aggregate: \"sum\"});\r\n       extSchema.ds.aggregate(extSchema.aggrs);\r\n\r\n       grdTk.destroy();            // http://docs.telerik.com/kendo-ui/framework/widgets/destroy\r\n       $(\"#grdTk\").empty();\r\n\r\n       grdTk = $(\"#grdTk\").kendoGrid({\r\n           //autoBind: false,\r\n           columns: extSchema.cols,\r\n           dataSource: extSchema.ds,\r\n           //height: 200,\r\n           //selectable: 'multiple, row',\r\n           resizable: true,\r\n           editable: { confirmation: false },\r\n       }).data(\"kendoGrid\");\r\n\r\n       // http://www.telerik.com/forums/kendo-grid-horizontal-scroll-bar\r\n   });\r\n   */\r\n   // #region Events/Functions\r\n   var openWinClient = function () {\r\n      var entry = $('#txtClient').val();\r\n      if ($.isNumeric(entry)) {\r\n         globalStore.cliNum = entry;          //window.gcliNum = entry;\r\n         globalStore.cliName = '';\r\n      } else {\r\n         globalStore.cliNum = '';\r\n         globalStore.cliName = entry;         //window.gcliName = entry;\r\n      }\r\n      globalStore.cliSndx = ($('#chkSound').is(':checked') ? 1 : 0);\r\n\r\n      $(\"#wincontainer\").append(\"<div id='winCli'></div>\");\r\n      $(\"#winCli\").kendoWindow({\r\n         //actions: {},\r\n         animation: {\r\n            open: {\r\n               effects: \"fadeIn\",\r\n               duration: 750\r\n            },\r\n            close: { effects: \"fade:out\" }\r\n         },\r\n         title: 'Expand Client & Click On Matter',\r\n         visible: false,\r\n         width: 400,\r\n         height: 350,\r\n         draggable: true,\r\n         resizable: false,\r\n         content: { url: $.url('Pages/PopUpClients') },\r\n         modal: true,\r\n         //open: function () { kendo.ui.progress($('#winCli'), true); },\r\n         close: function (e) {\r\n            resetRates();\r\n            disableBtns(true);\r\n            if (e.userTriggered) {\r\n               enableRates(false, false);\r\n            } else {\r\n               enablePeriods(true);\r\n               enableRates(true, true);\r\n               $('#btnAdd').prop('disabled', false);\r\n            }\r\n         },\r\n         deactivate: function () { this.destroy(); }\r\n      }).data(\"kendoWindow\").center().open();\r\n      //.content(\"<img src='../../Images/load.gif' alt='Loading...'/>\")\r\n      //.refresh({\r\n      //    url: $.url('Home/PopUpClients')\r\n      //});\r\n   },\r\n   openWinMatter = function () {\r\n      $(\"#wincontainer\").append(\"<div id='winMat'></div>\");\r\n      $(\"#winMat\").kendoWindow({\r\n         //actions: {},\r\n         animation: {\r\n            open: {\r\n               effects: \"fade:in\",\r\n               duration: 750\r\n            },\r\n            close: {effects: \"fade:out\"}\r\n         },\r\n         title: 'Type in new Matter Name and Currency:',\r\n         visible: false,\r\n         width: 290,\r\n         height: 100,\r\n         draggable: true,\r\n         resizable: false,\r\n         content: { url: $.url('Pages/PopUpMatter') },\r\n         modal: true,\r\n         open: function () { kendo.ui.progress($('#winMat'), true); },\r\n         close: function (e) {\r\n            resetRates();\r\n            disableBtns(true);\r\n            if (e.userTriggered) {\r\n               enableRates(false, false);\r\n            } else {\r\n               enablePeriods(false);\r\n               enableRates(true, false);\r\n               $('#btnAdd').prop('disabled', false);\r\n               $('#divMatter').text('Matter:  ' + $('#txtName').val());\r\n               $('#divCurrency').text('Matter\\'s Currency:  ' + $('#ddlCurr').data('kendoDropDownList').value());\r\n            }\r\n         },\r\n         deactivate: function () { this.destroy(); }\r\n      }).data(\"kendoWindow\").center().open();\r\n   },\r\n   selectRow = function () {\r\n      var checked = this.checked,\r\n         row = $(this).closest(\"tr\"),\r\n         dataItem = grdTk.dataItem(row);\r\n\r\n      if (checked) {\r\n         row.addClass(\"k-state-selected\");\r\n         dataItem.dirty = true;\r\n      } else {\r\n         row.removeClass(\"k-state-selected\");\r\n         dataItem.dirty = false;\r\n      }\r\n   },\r\n   checkPeriod = function (from, to) {\r\n      return $.get($.url('api/Modeler/CheckPeriod'), { 'from': from, 'to': to });\r\n   },\r\n   NoHeaders = function (e) {\r\n      // Disallowed group headers selection\r\n      var dataItem = this.dataItem(e.item.index());\r\n      if (typeof dataItem.value === 'number') {\r\n         e.preventDefault();\r\n      }\r\n   },\r\n   getTks = function () {\r\n      var cli = globalStore.matNum.split('-').shift(),\r\n         mat = globalStore.matNum,\r\n         beg = kendo.toString(fromPicker.value(), \"MMyy\") || '',\r\n         end = kendo.toString(toPicker.value(), \"MMyy\") || '',\r\n         his = ($('input:radio[name=rbPeriod]:checked').val() === 'Year' ? 'Y' : 'N'),\r\n         bil = ($(\"#chkBilled\").is(\":checked\") ? '1' : '0'),\r\n         unb = ($(\"#chkUnbilled\").is(\":checked\") ? '1' : '0');\r\n\r\n      $.get($.url('api/Modeler/GetTks'),\r\n         //{ 'client': '052409', 'matter': '052409-0001', 'begper': '0413', 'endper': '1114', 'History': 'N', 'Billed': '1', 'Unbilled': '1' },\r\n         //{ 'client': '053345', 'matter': '053345-0000', 'begper': '', 'endper': '', 'History': 'Y', 'Billed': '1', 'Unbilled': '0' },\r\n         { 'client': cli, 'matter': mat, 'begper': beg, 'endper': end, 'History': his, 'Billed': bil, 'Unbilled': unb\r\n      }, null, 'jsonData')\r\n      .done(function (data, status, xhr) {\r\n         if (JSON.stringify(data) !== \"[]\") {\r\n               globalStore.roster = data;\r\n               var arrIn = [];\r\n               $.each(data, function (idx, item) {\r\n                  var id = item.ttk, lvl = item.tilevel, arrLine = [];\r\n                  arrLine.push(new rateService.parm(id, lvl, rtModels.code1, rtModels.curr1),\r\n                              new rateService.parm(id, lvl, rtModels.code2, rtModels.curr2),\r\n                              new rateService.parm(id, lvl, rtModels.code3, rtModels.curr3));\r\n                  arrIn.push(arrLine);\r\n               });\r\n               rateService.getAllRates(arrIn)      // Get rates for all Tks & 3 models\r\n                  .then(function (rates) {\r\n                     //console.log(JSON.stringify(result, null, 4));\r\n                     pullRoster(rates, false);\r\n               }, function (err) {\r\n                     toastr.error('getAllRates: ' +err);\r\n                     kendo.ui.progress($(\"#divTk\"), false);\r\n               });\r\n         } else {\r\n            toastr.warning('No timekeeper roster available at this time');\r\n            grdTk.dataSource.data([]);\r\n            $(\"#grdTk\").find('.k-grid-content tbody')\r\n               .empty()\r\n               .append('<tr class=\"kendo-data-row\"><td colspan=\"12\" style=\"text-align:center\"><b>No timekeeper roster available at this time</b></td></tr>');\r\n            kendo.ui.progress($(\"#divTk\"), false);\r\n         }\r\n         $('#btnPull').prop('disabled', false);\r\n         $('#btnPull').text(' ReCalc ');\r\n      }).fail(function (xhr, status, err) {\r\n         $('#btnPull').prop('disabled', false);\r\n         toastr.error('GetTks: ' +err);\r\n         kendo.ui.progress($(\"#divTk\"), false);\r\n      }).always(function () {\r\n         //kendo.ui.progress($(\"#divTk\"), false);\r\n      });\r\n   },\r\n   getNewRateStructures = function () {  //*** Recalc new rates, but keep entered values for \"Prop Hours\", \"Prop Rate\" & \"Prop Calc\" ***\r\n      var grid = $(\"#grdTk\").data(\"kendoGrid\"),\r\n         data = grid.dataSource.data(),\r\n         arrIn = [], arrTks = [];\r\n\r\n      $.each(data, function (i, row) {\r\n         var id = row.id, lvl = row.lvl, arrLine = [];\r\n         arrLine.push(new rateService.parm(id, lvl, rtModels.code1, rtModels.curr1),\r\n                     new rateService.parm(id, lvl, rtModels.code2, rtModels.curr2),\r\n                     new rateService.parm(id, lvl, rtModels.code3, rtModels.curr3));\r\n         arrIn.push(arrLine);\r\n         // Object properties match those returned from $.get($.url('api/Modeler/GetTks'), ie. tbillstatus, ttk, tkname, etc.\r\n         //arrTks.push({ 'tbillstatus': row.status, 'ttk': row.id, 'tkname': row.name, 'tilevel': row.lvl, 'tktitle': row.title, 'loaddr6': row.loc, 'label5': row.dep, 'tworkhrs': row.hrsProp, 'tbilldol': row.amtBill });\r\n         arrTks.push({ 'tbillstatus': row.status, 'ttk': row.id, 'tkname': row.name, 'tilevel': row.lvl, 'tktitle': row.title, 'loaddr6': row.loc, 'label5': row.dep, 'tworkhrs': row.hrsProp, 'tbilldol': row.amtBill, 'rateProp': row.rateProp, 'calcProp': row.calcProp });\r\n      });\r\n\r\n      globalStore.roster = arrTks;\r\n      rateService.getAllRates(arrIn)      // Get rates for all Tks & 3 models\r\n         .then(function (rates) {\r\n               pullRoster(rates, true);\r\n      }, function (err) {\r\n         toastr.error('getAllRates: ' + err);\r\n         kendo.ui.progress($(\"#divTk\"), false);\r\n      });\r\n   },\r\n   pullRoster = function (rates, bReCalc) {\r\n      // http://heyjavascript.com/4-creative-ways-to-clone-objects/\r\n      var fldsClone = JSON.parse(JSON.stringify(extSchema.flds)),\r\n         colsClone = JSON.parse(JSON.stringify(extSchema.cols)),        // $.extend({}, extSchema.cols)\r\n         aggrsClone = JSON.parse(JSON.stringify(extSchema.aggrs)),\r\n         //hrsProp = $.grep(colsClone, function (e) { return e.field == 'hrsProp'; }),\r\n         yrs, desc, curr;\r\n\r\n      // Re-attach editor lost in cloning process\r\n      colsClone[11].editor = extSchema.editNoSpinners;        // 'hrsProp'\r\n      colsClone[12].editor = extSchema.editNoSpinners;        // 'rateProp'\r\n\r\n      //#region Schema for multi-year projection\r\n      for (var modNo = 1; modNo <= 3; modNo++) {\r\n         if (rtModels['code' +modNo] !== undefined) {\r\n            desc = ' ' + rtModels['desc' + modNo];\r\n            curr = rtModels['currSymbol' + modNo];\r\n         } else {\r\n            desc = '';\r\n            curr = modNo;\r\n         }\r\n         if (typeof utils.pctDist !== 'undefined') {\r\n            yrs = utils.yrs;\r\n            for (var i = 1; i <= yrs; i++) {\r\n               fldsClone['rate' + modNo + 'Yr' +i] = { type: \"number\", defaultValue: 0 };\r\n               fldsClone['calc' + modNo + 'Yr' +i] = { type: \"number\", defaultValue: 0 };\r\n\r\n               //colsClone.push({ field: 'rate1Yr' + i, title: 'Proj Year1 Rate' + i, format: \"{0:n2}\", attributes: { class: \"align-right\" }, template: kendo.template($(\"#tmplConv1\").html()) });\r\n               colsClone.push({ field: 'rate' + modNo + 'Yr' +i, title: 'Proj Year ' + i + desc + ' Rate ' +curr, format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\" }, attributes: { class: \"align-right\" } });\r\n               colsClone.push({\r\n                  field: 'calc' + modNo + 'Yr' +i, title: 'Proj Year ' + i + desc + ' Calc ' +curr, format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\"}, attributes: { class: \"align-right\"},\r\n                  footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\"\r\n               });\r\n\r\n               aggrsClone.push({ field: 'calc' + modNo + 'Yr' +i, aggregate: 'sum' });\r\n            }\r\n         }\r\n         // rate1..3 / calc1..3: Title can also be changed in onDataBoundgrdTk event\r\n         //colsClone.push({ field: 'rate' + modNo, title: 'Total Proj' + desc + ' Rate ' + curr, format: \"{0:n2}\", attributes: { class: \"align-right\" }, template: kendo.template($('#tmplConv' + modNo).html()) });\r\n         colsClone.push({\r\n            field: 'rate' + modNo, title: 'Total Proj' + desc + ' Rate ' + curr, headerAttributes: { \"class\": \"wrap-header\" }, attributes: { class: \"align-right\" },\r\n            template: kendo.template($('#tmplConv' + modNo).html())\r\n         });\r\n         colsClone.push({\r\n            field: 'calc' +modNo, title: 'Total Proj' + desc + ' Calc ' +curr, format: \"{0:n2}\", headerAttributes: { \"class\": \"wrap-header\"}, attributes: { class: \"align-right\"}, \r\n            footerTemplate: \"<div style='float: right'>#= kendo.toString(sum, 'n2') #</div>\"\r\n         });\r\n      }\r\n      //#endregion\r\n\r\n      // #region Populate grid data\r\n      var clients = [];\r\n      $.each(globalStore.roster, function (idx, item) {\r\n         if ((!$(\"#chkUnbilled\").is(\":checked\") && item.tbillstatus === 'U') || (!$(\"#chkBilled\").is(\":checked\") && item.tbillstatus === 'B')) {\r\n            // Skip record\r\n         } else if (item.tworkhrs === 0 && item.tbilldol === 0 && item.tbillstatus !== '') { // item.tbillstatus === ''  -->  Added manually via button\r\n            // Skip record\r\n         } else {\r\n            var tkRates = _.find(rates, function (arr) { return arr[0].id === item.ttk; }),      // OR $.grep(rates, function (arr) { return arr[0].id == item.ttk; )\r\n            cli = {\r\n               status: item.tbillstatus,\r\n               id: item.ttk,                   // Not displayed\r\n               name: item.tkname,\r\n               lvl: item.tilevel,              // Not displayed\r\n               title: item.tktitle,\r\n               loc: item.loaddr6,\r\n               dep: item.label5,\r\n               //hrsBill: item.tworkhrs,\r\n               hrsBill: (item.tbillstatus === '' ? 0 : item.tworkhrs),       // item.tbillstatus === '' --> Added via \"Add Timekeeper(s)\" button\r\n               amtBill: item.tbilldol,\r\n               rateBlend: (item.tworkhrs === 0 ? 0 : item.tbilldol / item.tworkhrs),\r\n               hrsProp: item.tworkhrs,\r\n               rateProp: (bReCalc ? item.rateProp : 0),\r\n               calcProp: (bReCalc ? item.calcProp : 0),\r\n               conv1: tkRates[0].conv,         // Not displayed\r\n               conv2: tkRates[1].conv,         // Not displayed\r\n               conv3: tkRates[2].conv,         // Not displayed\r\n               rate1: tkRates[0].rate,\r\n               calc1: tkRates[0].rate * item.tworkhrs,\r\n               rate2: tkRates[1].rate,\r\n               calc2: tkRates[1].rate * item.tworkhrs,\r\n               rate3: tkRates[2].rate,\r\n               calc3: tkRates[2].rate * item.tworkhrs,\r\n            };\r\n\r\n            // Multi-year projection\r\n            if (utils.pctDist !== undefined) {\r\n               var alloc = utils.pctDist;                      // % Distribution across years/months\r\n\r\n               if (alloc[0].dte.indexOf('/') === -1) {\r\n                  // #region Allocation across years\r\n                  var pctInc = utils.incr / 100,              // Annual % increase\r\n                     currYr = (new Date()).getFullYear(),\r\n                     wtMean1 = 0, wtMean2 = 0, wtMean3 = 0;  // Weighted means\r\n\r\n                  for (var i = 1; i <= yrs; i++) {\r\n                     // Model 1:  fvCalc = function (P, r, t)\r\n                     cli['rate1Yr' +i] = utils.fvCalc(cli.rate1, pctInc, alloc[i -1].dte -currYr);\r\n                     cli['calc1Yr' +i] = utils.round(cli['rate1Yr' +i] * cli.hrsProp * alloc[i -1].pct, 2);          // utils.round():  Match totals to the exact penny                \r\n                     wtMean1 += cli['rate1Yr' +i] * alloc[i -1].pct;\r\n                     // Model 2\r\n                     cli['rate2Yr' +i] = utils.fvCalc(cli.rate2, pctInc, alloc[i -1].dte -currYr);\r\n                     cli['calc2Yr' +i] = utils.round(cli['rate2Yr' +i] * cli.hrsProp * alloc[i -1].pct, 2);\r\n                     wtMean2 += cli['rate2Yr' +i] * alloc[i -1].pct;\r\n                     // Model 3\r\n                     cli['rate3Yr' +i] = utils.fvCalc(cli.rate3, pctInc, alloc[i -1].dte -currYr);\r\n                     cli['calc3Yr' +i] = utils.round(cli['rate3Yr' +i] * cli.hrsProp * alloc[i -1].pct, 2);\r\n                     wtMean3 += cli['rate3Yr' +i] * alloc[i -1].pct;\r\n                  }\r\n                  cli.rate1 = wtMean1;\r\n                  cli.calc1 = utils.round(wtMean1 * cli.hrsProp, 2);\r\n\r\n                  cli.rate2 = wtMean2;\r\n                  cli.calc2 = utils.round(wtMean2 * cli.hrsProp, 2);\r\n\r\n                  cli.rate3 = wtMean3;\r\n                  cli.calc3 = utils.round(wtMean3 * cli.hrsProp, 2);\r\n                  // #endregion\r\n               } else {\r\n                  // #region Allocation across months\r\n                  var allocRt1 = utils.pctMthDist(cli.rate1, cli.hrsProp),\r\n                     allocRt2 = utils.pctMthDist(cli.rate2, cli.hrsProp),\r\n                     allocRt3 = utils.pctMthDist(cli.rate3, cli.hrsProp),\r\n                     cnt = allocRt1.length;\r\n\r\n                  for (var n = 1; n <= cnt; n++) {\r\n                     // Model 1:\r\n                     cli['rate1Yr' +n] = parseFloat(allocRt1[n -1].rate).toFixed(2);\r\n                     cli['calc1Yr' +n] = utils.round(allocRt1[n -1].calc, 2);\r\n                     // Model 2\r\n                     cli['rate2Yr' +n] = parseFloat(allocRt2[n -1].rate).toFixed(2);\r\n                     cli['calc2Yr' +n] = utils.round(allocRt2[n -1].calc, 2);\r\n                     // Model 3\r\n                     cli['rate3Yr' +n] = parseFloat(allocRt3[n -1].rate).toFixed(2);\r\n                     cli['calc3Yr' +n] = utils.round(allocRt3[n -1].calc, 2);\r\n\r\n                     if (n === cnt) {\r\n                        cli.rate1 = allocRt1[n -1].rate;\r\n                        cli.calc1 = utils.round(allocRt1[n -1].calc, 2);\r\n\r\n                        cli.rate2 = allocRt2[n -1].rate;\r\n                        cli.calc2 = utils.round(allocRt2[n -1].calc, 2);\r\n\r\n                        cli.rate3 = allocRt3[n -1].rate;\r\n                        cli.calc3 = utils.round(allocRt3[n -1].calc, 2);\r\n                     }\r\n                  }\r\n                  // #endregion\r\n               }\r\n            }\r\n         clients.push(cli);\r\n         }\r\n      });\r\n      // #endregion\r\n\r\n      grdTk.destroy();\r\n      //grdTk.wrapper.empty();\r\n      grdTk = $(\"#grdTk\").empty().kendoGrid({\r\n         //#region Archive\r\n         //dataSource: {\r\n         //    transport: {\r\n         //        read: {\r\n         //            url: $.url('api/Modeler/GetTks'),\r\n         //            data: { 'client': cli, 'matter': mat, 'begper': beg, 'endper': end, 'History': his, 'Billed': bil, 'Unbilled': unb },\r\n         //            dataType: 'jsonData'\r\n         //        }\r\n         //    },\r\n         //    schema: {\r\n         //        model: extSchema.model,\r\n         //        parse: function (data) {\r\n         //            var clients = [];\r\n         //            $.each(data, function (idx, item) {\r\n         //                var cli = {\r\n         //                    status: item.tbillstatus,\r\n         //                    id: item.ttk,\r\n         //                    name: item.tkname,\r\n         //                    lvl: item.tilevel,\r\n         //                    title: item.tktitle,\r\n         //                    loc: item.loaddr6,\r\n         //                    dep: item.label5,\r\n         //                    hrsBill: item.tworkhrs,\r\n         //                    amtBill: item.tbilldol,\r\n         //                    rateBlend: (item.tworkhrs == 0 ? 0 : item.tbilldol / item.tworkhrs),\r\n         //                    hrsProp: item.tworkhrs,\r\n         //                    rateProp: 0,\r\n         //                    calcProp: 0,\r\n         //                    rate1: 0,\r\n         //                    calc1: 0,\r\n         //                    rate2: 0,\r\n         //                    calc2: 0,\r\n         //                    rate3: 0,\r\n         //                    calc3: 0,\r\n         //                };\r\n         //                clients.push(cli);\r\n         //            });\r\n         //            console.groupCollapsed(\"Massaged roster data:\");\r\n         //            console.log(JSON.stringify(clients, null, 4));\r\n         //            console.groupEnd();\r\n         //            return clients;\r\n         //        }\r\n         //    },\r\n         //    aggregate: extSchema.aggrs\r\n         //},\r\n         //#endregion\r\n         dataSource: {\r\n            data: clients,\r\n            //schema: { model: extSchema.model },\r\n            schema: { model: { id: \"id\", fields: fldsClone } },\r\n            aggregate: aggrsClone\r\n         },\r\n         columns: colsClone,\r\n         //editable: true,\r\n         editable: { confirmation: false },\r\n         //height: 210,\r\n         navigatable: true,\r\n         //selectable: 'multiple, row',\r\n         resizable: true,\r\n         pageable: { pageSize: 10 },\r\n         edit: onEditgrdTk,\r\n         save: onSavegrdTk,\r\n         dataBound: onDataBoundgrdTk\r\n      }).data(\"kendoGrid\");\r\n      // Reset grid height\r\n      // $('#grdTk > .k-grid-content').css({ 'height': '175px' });\r\n\r\n      if (grdTk.dataSource.total() != 0) disableBtns(false);\r\n\r\n      // Must define after data is populated\r\n      grdTk.table.on(\"click\", \".chkbox\", selectRow);\r\n   },\r\n   onEditgrdTk = function (e) {\r\n      var fieldname = grdTk.columns[e.container.index()].field,\r\n         editfields = 'hrsProp, rateProp';   // Allowed editable fields\r\n      if (editfields.indexOf(fieldname) === -1) this.closeCell();\r\n   },\r\n   onSavegrdTk = function (e) {\r\n   // http://stackoverflow.com/questions/21159784/subtract-value-of-two-columns-from-to-and-put-the-result-to-a-different-colu\r\n   for (var field in e.values);\r\n   if (field === 'rateProp') {\r\n      e.model.set(\"calcProp\", e.model.hrsProp * e.values.rateProp);\r\n   }\r\n   if (field === 'hrsProp') {\r\n      e.model.set(\"calcProp\", e.values.hrsProp * e.model.rateProp);\r\n      e.model.set(\"calc1\", e.values.hrsProp * e.model.rate1);\r\n      e.model.set(\"calc2\", e.values.hrsProp * e.model.rate2);\r\n      e.model.set(\"calc3\", e.values.hrsProp * e.model.rate3);\r\n      // Multi-year projection\r\n      if (typeof utils.pctDist !== 'undefined') {\r\n         var yrs = utils.yrs;\r\n         for (var i = 1; i <= yrs; i++) {\r\n            e.model.set('calc1Yr' +i, e.values.hrsProp * e.model['rate1Yr' +i]);\r\n            e.model.set('calc2Yr' +i, e.values.hrsProp * e.model['rate2Yr' +i]);\r\n            e.model.set('calc3Yr' +i, e.values.hrsProp * e.model['rate3Yr' +i]);\r\n         }\r\n      }\r\n   }\r\n   this.refresh();\r\n   },\r\n   onDataBoundgrdTk = function () {\r\n      /*\r\n      // Change column headers to match rates selected\r\n      if (rtModels.code1 !== undefined) {\r\n         $('#grdTk th[data-field=rate1]').html('Total Proj ' + rtModels.desc1 + ' Rate ' + rtModels.currSymbol1);\r\n         $('#grdTk th[data-field=calc1]').html('Total Proj ' + rtModels.desc1 + ' Calc ' + rtModels.currSymbol1);\r\n      }\r\n      */\r\n      /*\r\n      // http://blog.falafel.com/displaying-message-kendo-ui-grid-empty/\r\n      // http://sympletech.com/adding-no-results-found-to-the-kendoui-grid/\r\n      //Get the number of Columns in the grid\r\n      //var colCount = $(\"#kGrid\").find('.k-grid-header colgroup > col').length;\r\n      //If There are no results place an indicator row\r\n      if (this.dataSource.total() === 0) {\r\n         $(\"#grdTk\").find('.k-grid-content tbody')\r\n            .append('<tr class=\"kendo-data-row\"><td colspan=\"0\" style=\"text-align:center\"><b>No timekeeper roster available at this time</b></td></tr>');\r\n      }\r\n      */\r\n      /*\r\n      //Get visible row count\r\n      var rowCount = $(\"#kGrid\").find('.k-grid-content tbody tr').length;\r\n      //If the row count is less that the page size add in the number of missing rows\r\n      if (rowCount < dsTk._take) {\r\n         var addRows = dsTk._take -rowCount;\r\n         for (var i = 0; i < addRows; i++) {\r\n            $(\"#grdTk\").find('.k-grid-content tbody')\r\n                  .append('<tr class=\"kendo-data-row\"><td>&nbsp;</td></tr>');\r\n         }\r\n      }\r\n      */\r\n\r\n      var per = $('input:radio[name=rbPeriod]:checked').val(),\r\n         beg = kendo.toString(fromPicker.value(), \"MMyy\"),\r\n         end = kendo.toString(toPicker.value(), \"MMyy\"),\r\n         bil = $(\"#chkBilled\").is(\":checked\"),\r\n         unb = $(\"#chkUnbilled\").is(\":checked\"),\r\n         tot = this.dataSource.total();\r\n\r\n      saveParms(per, beg, end, bil, unb, tot);\r\n      kendo.ui.progress($(\"#divTk\"), false);\r\n   };\r\n\r\n   function Element(text, value) {\r\n      this.text = text;\r\n      this.value = value;\r\n   };\r\n\r\n   function populateRateDDLs() {\r\n      //kendo.ui.progress($(\"#divMain\"), true);\r\n        $.ajax({\r\n           //url: '@Url.Action(\"GetRates\", \"Pages\", null, \"http\")',\r\n           //url: $.url('Pages/GetRates'),\r\n           //type: 'POST',\r\n              url: $.url('api/Modeler/GetRates'),\r\n              dataType: 'jsonData',\r\n              success: function (data) {\r\n                if (JSON.stringify(data) != \"[]\") {\r\n                    var rtGrp = -123,\r\n                        rtData = [];     //new Array(new Element('', ''));\r\n                    data.forEach(function (val) {\r\n                        if (val.rtRateGroup != rtGrp) {\r\n                            rtData.push(new Element(val.rtRateGroupDesc.trim(), val.rtRateGroup));     // Group header\r\n                            rtGrp = val.rtRateGroup;\r\n                    }\r\n                        rtData.push(new Element(val.rtDesc.trim(), val.rtCurr.trim() + '|' + val.rtCode + '|' + val.rtCurrSymbol.trim() + '|' + val.rtDesc.trim()));\r\n                    });\r\n\r\n                    ddl1 = $('#ddlModel1').kendoDropDownList({\r\n                          dataTextField: \"text\",\r\n                          dataValueField: \"value\",\r\n                          dataSource: rtData,\r\n                          template: kendo.template($(\"#tmplRate\").html()),\r\n                          //dataBound: function (e) {\r\n                          //   e.sender.dataSource.transport.data.unshift({ text: '062', value: 'Total' });\r\n                          //},\r\n                          optionLabel: \"Select rate model 1\",\r\n                          select: NoHeaders\r\n                    }).data(\"kendoDropDownList\");\r\n                    ddl1.list.width(275);\r\n                    ddl2 = $('#ddlModel2').kendoDropDownList({\r\n                          dataTextField: \"text\",\r\n                          dataValueField: \"value\",\r\n                          dataSource: rtData,\r\n                          template: kendo.template($(\"#tmplRate\").html()),\r\n                          optionLabel: \"Select rate model 2\",\r\n                          select: NoHeaders\r\n                    }).data(\"kendoDropDownList\");\r\n                    ddl2.list.width(275);\r\n                    ddl3 = $('#ddlModel3').kendoDropDownList({\r\n                          dataTextField: \"text\",\r\n                          dataValueField: \"value\",\r\n                          dataSource: rtData,\r\n                          template: kendo.template($(\"#tmplRate\").html()),\r\n                          optionLabel: \"Select rate model 3\",\r\n                          select: NoHeaders\r\n                  //}).data(\"kendoDropDownList\").list.width(\"auto\");\r\n                    }).data(\"kendoDropDownList\");\r\n                    ddl3.list.width(275);\r\n\r\n                    resetRates();\r\n                    enableRates(false, false);\r\n              }\r\n        },\r\n              error: function (xhr, status, err) {\r\n                toastr.error('GetRates', err);\r\n        },\r\n              complete: function () {\r\n                 //kendo.ui.progress($(\"#divMain\"), false);\r\n        }\r\n        });\r\n   };\r\n\r\n   function isParmsClean(per, beg, end, bil, unb, tot) {\r\n      return (globalStore.per == per && globalStore.beg == beg && globalStore.end == end\r\n         && globalStore.bil == bil && globalStore.unb == unb && tot != 0);\r\n   }\r\n\r\n   function saveParms(per, beg, end, bil, unb, tot) {\r\n      globalStore.per = per;\r\n      globalStore.beg = beg;\r\n      globalStore.end = end;\r\n      globalStore.bil = bil;\r\n      globalStore.unb = unb;\r\n      globalStore.tot = tot;\r\n   }\r\n\r\n   function enablePeriods(flg) {\r\n      if (flg) {\r\n         $('#divPeriod').prop('disabled', !flg);\r\n         //fromPicker.enable(flg);\r\n         //toPicker.enable(flg);\r\n         $('#chkBilled').prop('checked', flg);\r\n      } else {\r\n         $('#divPeriod').prop('disabled', !flg);\r\n         $('input:radio[name=rbPeriod][value=Year]').prop('checked', !flg);\r\n         fromPicker.value(null);\r\n         toPicker.value(null);\r\n         fromPicker.enable(flg);\r\n         toPicker.enable(flg);\r\n         $('#chkBilled').prop('checked', flg);\r\n         $('#chkUnbilled').prop('checked', flg);\r\n      }\r\n   };\r\n\r\n   function enableRates(flg1, flg2) {\r\n      ddl1.enable(flg1);\r\n      ddl2.enable(flg1);\r\n      ddl3.enable(flg1);\r\n      $('#btnPull').prop('disabled', !flg2);\r\n   };\r\n\r\n   function resetRates() {\r\n      ddl1.select(0);\r\n      ddl2.select(0);\r\n      ddl3.select(0);\r\n   };\r\n\r\n   function disableBtns(flag) {\r\n      $('#btnDel').prop('disabled', flag);\r\n      $('#btnAdd').prop('disabled', flag);\r\n      $('#btnPrj').prop('disabled', flag);\r\n      $('#btnExl').prop('disabled', flag);\r\n   };\r\n\r\n   // #endregion    \r\n});\ndefine(\"main\", function(){});\n\n"]}